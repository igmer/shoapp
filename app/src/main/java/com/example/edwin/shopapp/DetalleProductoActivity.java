package com.example.edwin.shopapp;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.database.sqlite.SQLiteDatabase;import android.os.AsyncTask;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.ImageView;import android.widget.Toast;import com.example.edwin.shopapp.SQLite.SQLiteLocal;import com.squareup.picasso.Picasso;import java.sql.Connection;import java.sql.ResultSet;import java.sql.Statement;import java.text.SimpleDateFormat;import java.util.ArrayList;import java.util.Calendar;import java.util.Date;public class DetalleProductoActivity extends AppCompatActivity {    String codigo,url,nombre,precio,descripcion;    ImageView imDetalle;    Button btnAdd;    static ArrayList pedido=new ArrayList();    private SharedPreferences pref;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_detalle_producto);        pref = getSharedPreferences("Preferences", Context.MODE_PRIVATE);        Bundle bundle = getIntent().getExtras();        codigo = bundle.getString("codigo"); //del producto        url = bundle.getString("url"); //este es el nombre de la imagen        nombre = bundle.getString("nombre"); //este es el nombre de la imagen        precio = bundle.getString("precio"); //este es el nombre de la imagen        descripcion = bundle.getString("descripcion"); //este es el nombre de la imagen        imDetalle =(ImageView)findViewById(R.id.imDetalleProducto);        Picasso.get().load("http://www.geoshop.somee.com/UpImg/"+url).into(imDetalle);        btnAdd = (Button)findViewById(R.id.btnConfirmar);        btnAdd.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {               int added =  addLocalProducto(Integer.parseInt(codigo),url,nombre,precio,descripcion);               if(added == 1){                   Toast.makeText(getApplicationContext(),"Producto agregado a su pedido",Toast.LENGTH_SHORT).show();                   Intent i = new Intent(getApplicationContext(),MenusTabs.class);                   startActivity(i);               }               //Toast.makeText(getApplicationContext(),codigo,Toast.LENGTH_LONG).show();                //agregarProducto add = new agregarProducto();             //   add.execute("");            }        });    }    public int addLocalProducto(int codigoProd, String urlimage, String nombreProd, String precioProd, String descripcionProd){        int exito;        try {            SQLiteLocal helper = new SQLiteLocal(getApplicationContext());            SQLiteDatabase db = helper.getWritableDatabase();            String addpedido="INSERT INTO DetallePedido(idProducto,estado,url,nombre,precio,descripcion)values("+codigoProd+",'ADD','"+urlimage+"'," +                    "'"+nombreProd+"','"+precioProd+"','"+descripcionProd+"')";            db.execSQL(addpedido);            exito = 1;        }catch (Exception e){            e.printStackTrace();            exito =0;        }    return exito;    }}